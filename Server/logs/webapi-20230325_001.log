[2023-03-25 19:27:26.036 +03:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
[2023-03-25 19:27:26.156 +03:00  INF]  Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
[2023-03-25 19:27:26.159 +03:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
[2023-03-25 19:27:26.161 +03:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
[2023-03-25 19:27:26.189 +03:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
[2023-03-25 19:27:26.206 +03:00  INF]  Applying migration '20230325162659_update3'.
[2023-03-25 19:27:26.249 +03:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230325162659_update3', N'7.0.4');
[2023-03-25 19:27:38.299 +03:00  INF]  Now listening on: https://localhost:7297
[2023-03-25 19:27:38.464 +03:00  INF]  Now listening on: http://localhost:5128
[2023-03-25 19:27:38.468 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-03-25 19:27:38.469 +03:00  INF]  Hosting environment: Development
[2023-03-25 19:27:38.469 +03:00  INF]  Content root path: C:\Users\Aviv\OneDrive\שולחן העבודה\GitHubProjects\AirportProject\Server\Airport
[2023-03-25 19:27:39.011 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/swagger/index.html - -
[2023-03-25 19:27:39.321 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/swagger/index.html - - - 200 - text/html;charset=utf-8 312.2643ms
[2023-03-25 19:27:39.420 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/_framework/aspnetcore-browser-refresh.js - -
[2023-03-25 19:27:39.426 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 6.4398ms
[2023-03-25 19:27:39.443 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/_vs/browserLink - -
[2023-03-25 19:27:39.509 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 65.2594ms
[2023-03-25 19:27:39.754 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/swagger/v1/swagger.json - -
[2023-03-25 19:27:39.867 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 113.1869ms
[2023-03-25 19:27:47.425 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7297/api/Flights/AddLegs - 0
[2023-03-25 19:27:47.435 +03:00  INF]  CORS policy execution successful.
[2023-03-25 19:27:47.442 +03:00  INF]  Executing endpoint 'FlightSimulator.Controllers.FlightsController.AddLegs (Airport)'
[2023-03-25 19:27:47.463 +03:00  INF]  Route matched with {action = "AddLegs", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddLegs() on controller FlightSimulator.Controllers.FlightsController (Airport).
[2023-03-25 19:28:49.569 +03:00  INF]  Now listening on: https://localhost:7297
[2023-03-25 19:28:49.725 +03:00  INF]  Now listening on: http://localhost:5128
[2023-03-25 19:28:49.728 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-03-25 19:28:49.729 +03:00  INF]  Hosting environment: Development
[2023-03-25 19:28:49.729 +03:00  INF]  Content root path: C:\Users\Aviv\OneDrive\שולחן העבודה\GitHubProjects\AirportProject\Server\Airport
[2023-03-25 19:28:50.184 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/swagger/index.html - -
[2023-03-25 19:28:50.480 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/swagger/index.html - - - 200 - text/html;charset=utf-8 298.1286ms
[2023-03-25 19:28:50.500 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/_framework/aspnetcore-browser-refresh.js - -
[2023-03-25 19:28:50.511 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 10.5653ms
[2023-03-25 19:28:50.548 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/_vs/browserLink - -
[2023-03-25 19:28:50.602 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 53.9947ms
[2023-03-25 19:28:50.726 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/swagger/v1/swagger.json - -
[2023-03-25 19:28:50.843 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 117.0041ms
[2023-03-25 19:28:59.343 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7297/api/Flights/AddLegs - 0
[2023-03-25 19:28:59.354 +03:00  INF]  CORS policy execution successful.
[2023-03-25 19:28:59.360 +03:00  INF]  Executing endpoint 'FlightSimulator.Controllers.FlightsController.AddLegs (Airport)'
[2023-03-25 19:28:59.384 +03:00  INF]  Route matched with {action = "AddLegs", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddLegs() on controller FlightSimulator.Controllers.FlightsController (Airport).
[2023-03-25 19:32:59.497 +03:00  INF]  Now listening on: https://localhost:7297
[2023-03-25 19:32:59.645 +03:00  INF]  Now listening on: http://localhost:5128
[2023-03-25 19:32:59.648 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-03-25 19:32:59.649 +03:00  INF]  Hosting environment: Development
[2023-03-25 19:32:59.649 +03:00  INF]  Content root path: C:\Users\Aviv\OneDrive\שולחן העבודה\GitHubProjects\AirportProject\Server\Airport
[2023-03-25 19:32:59.931 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/swagger/index.html - -
[2023-03-25 19:33:00.227 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/swagger/index.html - - - 200 - text/html;charset=utf-8 297.8564ms
[2023-03-25 19:33:00.244 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/_framework/aspnetcore-browser-refresh.js - -
[2023-03-25 19:33:00.255 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 9.9657ms
[2023-03-25 19:33:00.297 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/_vs/browserLink - -
[2023-03-25 19:33:00.354 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 57.3843ms
[2023-03-25 19:33:00.492 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/swagger/v1/swagger.json - -
[2023-03-25 19:33:00.617 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 125.4588ms
[2023-03-25 19:33:04.859 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7297/api/Flights/AddLegs - 0
[2023-03-25 19:33:04.870 +03:00  INF]  CORS policy execution successful.
[2023-03-25 19:33:04.875 +03:00  INF]  Executing endpoint 'FlightSimulator.Controllers.FlightsController.AddLegs (Airport)'
[2023-03-25 19:33:04.897 +03:00  INF]  Route matched with {action = "AddLegs", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddLegs() on controller FlightSimulator.Controllers.FlightsController (Airport).
[2023-03-25 19:33:06.140 +03:00  ERR]  An exception occurred in the database while saving changes for context type 'Airport.Infrastracture.AirportDataContext'.
System.InvalidOperationException: The value of 'Leg.Id' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: The value of 'Leg.Id' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2023-03-25 19:33:06.198 +03:00  ERR]  The value of 'Leg.Id' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
[2023-03-25 19:33:06.283 +03:00  INF]  Executed action FlightSimulator.Controllers.FlightsController.AddLegs (Airport) in 1380.843ms
[2023-03-25 19:33:06.286 +03:00  INF]  Executed endpoint 'FlightSimulator.Controllers.FlightsController.AddLegs (Airport)'
[2023-03-25 19:33:06.288 +03:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The value of 'Leg.Id' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Airport.Infrastracture.Repositories.LegRepository.AddLegAsync(Leg leg) in C:\Users\Aviv\OneDrive\שולחן העבודה\GitHubProjects\AirportProject\Server\Airport.Infrastracture\Repositories\LegRepository.cs:line 27
   at FlightSimulator.Controllers.FlightsController.AddLegs() in C:\Users\Aviv\OneDrive\שולחן העבודה\GitHubProjects\AirportProject\Server\Airport\Controllers\FlightsController.cs:line 60
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-03-25 19:33:06.309 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7297/api/Flights/AddLegs - 0 - 500 - text/plain;+charset=utf-8 1449.3759ms
[2023-03-25 19:33:23.127 +03:00  INF]  Now listening on: https://localhost:7297
[2023-03-25 19:33:23.291 +03:00  INF]  Now listening on: http://localhost:5128
[2023-03-25 19:33:23.294 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-03-25 19:33:23.295 +03:00  INF]  Hosting environment: Development
[2023-03-25 19:33:23.295 +03:00  INF]  Content root path: C:\Users\Aviv\OneDrive\שולחן העבודה\GitHubProjects\AirportProject\Server\Airport
[2023-03-25 19:33:23.834 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/swagger/index.html - -
[2023-03-25 19:33:24.222 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/swagger/index.html - - - 200 - text/html;charset=utf-8 390.5644ms
[2023-03-25 19:33:24.232 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/_framework/aspnetcore-browser-refresh.js - -
[2023-03-25 19:33:24.242 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 10.4286ms
[2023-03-25 19:33:24.283 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/_vs/browserLink - -
[2023-03-25 19:33:24.348 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 65.3000ms
[2023-03-25 19:33:24.484 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/swagger/v1/swagger.json - -
[2023-03-25 19:33:24.600 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 115.7307ms
[2023-03-25 19:33:26.850 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7297/api/Flights/AddLegs - 0
[2023-03-25 19:33:26.859 +03:00  INF]  CORS policy execution successful.
[2023-03-25 19:33:26.865 +03:00  INF]  Executing endpoint 'FlightSimulator.Controllers.FlightsController.AddLegs (Airport)'
[2023-03-25 19:33:26.886 +03:00  INF]  Route matched with {action = "AddLegs", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddLegs() on controller FlightSimulator.Controllers.FlightsController (Airport).
[2023-03-25 19:33:35.142 +03:00  ERR]  An exception occurred in the database while saving changes for context type 'Airport.Infrastracture.AirportDataContext'.
System.InvalidOperationException: The value of 'Leg.Id' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: The value of 'Leg.Id' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2023-03-25 19:34:12.772 +03:00  INF]  Now listening on: https://localhost:7297
[2023-03-25 19:34:12.921 +03:00  INF]  Now listening on: http://localhost:5128
[2023-03-25 19:34:12.923 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-03-25 19:34:12.924 +03:00  INF]  Hosting environment: Development
[2023-03-25 19:34:12.924 +03:00  INF]  Content root path: C:\Users\Aviv\OneDrive\שולחן העבודה\GitHubProjects\AirportProject\Server\Airport
[2023-03-25 19:34:13.682 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/swagger/index.html - -
[2023-03-25 19:34:13.973 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/swagger/index.html - - - 200 - text/html;charset=utf-8 293.3855ms
[2023-03-25 19:34:13.995 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/_framework/aspnetcore-browser-refresh.js - -
[2023-03-25 19:34:14.005 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 10.2222ms
[2023-03-25 19:34:14.053 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/_vs/browserLink - -
[2023-03-25 19:34:14.116 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 62.4168ms
[2023-03-25 19:34:14.245 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7297/swagger/v1/swagger.json - -
[2023-03-25 19:34:14.369 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7297/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 124.2904ms
[2023-03-25 19:34:17.269 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7297/api/Flights/AddLegs - 0
[2023-03-25 19:34:17.278 +03:00  INF]  CORS policy execution successful.
[2023-03-25 19:34:17.283 +03:00  INF]  Executing endpoint 'FlightSimulator.Controllers.FlightsController.AddLegs (Airport)'
[2023-03-25 19:34:17.304 +03:00  INF]  Route matched with {action = "AddLegs", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddLegs() on controller FlightSimulator.Controllers.FlightsController (Airport).
[2023-03-25 19:34:40.058 +03:00  ERR]  An exception occurred in the database while saving changes for context type 'Airport.Infrastracture.AirportDataContext'.
System.InvalidOperationException: The value of 'Leg.Id' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: The value of 'Leg.Id' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
